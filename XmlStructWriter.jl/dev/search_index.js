var documenterSearchIndex = {"docs":
[{"location":"#XmlStructWriter","page":"Home","title":"XmlStructWriter","text":"","category":"section"},{"location":"#Getting-the-required-files","page":"Home","title":"Getting the required files","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"In order to get the required *.jl files follow the instructions of XsdToStruct.","category":"page"},{"location":"#Creating-an-xml-file-from-scratch","page":"Home","title":"Creating an xml file from scratch","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"In this example we create an XML file called \"example.xml\" that follows the schema \"example.xsd\" which defines the \"ExampleSchema\" namespace.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Let's assume that \"example.xsd\" looks as follows:","category":"page"},{"location":"","page":"Home","title":"Home","text":"<?xml version=\"1.0\"?>\n<schema xmlns=\"http://www.w3.org/2001/XMLSchema\" xmlns:ExampleSchema=\"ExampleSchema\" targetNamespace=\"ExampleSchema\">\n\n<element name=\"document\" type=\"ExampleSchema:documentType\"/>\n\n<complexType name=\"ExampleComplexType\">\n    <annotation>\n        <documentation>An example of a complex xsd type.</documentation>\n    </annotation>\n    <sequence>\n        <element name=\"Element_double\" type=\"double\"/>\n        <element name=\"Element_boolean\" type=\"boolean\"/>\n        <element name=\"Element_integer\" type=\"integer\"/>\n    </sequence>\n</complexType>\n\n<simpleType name=\"ExampleSimpleType\">\n    <annotation>\n        <documentation>An example of a simple xsd type.</documentation>\n    </annotation>\n    <restriction base=\"string\">\n        <maxLength value=\"4\"/>\n    </restriction>\n</simpleType>\n\n<complexType name=\"documentType\">\n    <sequence>\n        <element name=\"Example1\" type=\"ExampleSchema:ExampleComplexType\"/>\n        <element name=\"Example2\" type=\"ExampleSchema:ExampleSimpleType\"/>\n    </sequence>\n</complexType>\n\n</schema>","category":"page"},{"location":"","page":"Home","title":"Home","text":"And we want to make the following file called \"example.xml\":","category":"page"},{"location":"","page":"Home","title":"Home","text":"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n<ExampleSchema:document xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"ExampleSchema Example.xsd\" xmlns:ExampleSchema=\"ExampleSchema\">\n    <Example1>\n        <Element_double>100.22</Element_double>\n        <Element_boolean>true</Element_boolean>\n        <Element_integer>-778</Element_integer>\n    </Example1>\n\n    <TestElement2>AA99</TestElement2>\n</ExampleSchema:document>","category":"page"},{"location":"","page":"Home","title":"Home","text":"The procedure consists of three steps:","category":"page"},{"location":"","page":"Home","title":"Home","text":"We load the struct definitions generated by XsdToStruct.\nWe construct an instance of the struct representing the xml file with the required data.\nWe write the struct instance to a file.","category":"page"},{"location":"#Loading-the-struct-definitions","page":"Home","title":"Loading the struct definitions","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"If we put the *.jl files generated by XsdToStruct in the folder \"Example\" we can load the struct definitions as follows:","category":"page"},{"location":"","page":"Home","title":"Home","text":"include(joinpath(\"Example\", \"Example.jl\"))\nusing .ExampleSchema","category":"page"},{"location":"#Creating-the-struct-instance","page":"Home","title":"Creating the struct instance","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Next we create struct instances with the data that we want to put into the xml.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Example1 = ExampleComplexType(\n    Element_double=100.22,\n    Element_boolean=true,\n    Element_integer=-778\n)\n\nxml_attributes = Dict(\n    \"xmlns:xsi\"=>\"http://www.w3.org/2001/XMLSchema-instance\",\n    \"xsi:schemaLocation\"=>\"ExampleSchema Example.xsd\",\n    \"xmlns:ExampleSchema\"=>\"ExampleSchema\",\n    \"__root_name\"=>\"document\"\n)\n\ndocument = documentType(\n    Example1=Example1,\n    Example2=\"AA99\",\n    __xml_attributes=xml_attributes\n)","category":"page"},{"location":"#Writing-the-xml-file","page":"Home","title":"Writing the xml file","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Finally we write the xml struct to a file:","category":"page"},{"location":"","page":"Home","title":"Home","text":"using XmlStructWriter\n\nwrite_xml(document, \"example.xml\")","category":"page"},{"location":"#Editing-an-xml-file","page":"Home","title":"Editing an xml file","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"In this example we will edit the xml file from the previous example. We want to change the value of the \"Example1/Element_double\" to \"-789.123\".","category":"page"},{"location":"","page":"Home","title":"Home","text":"The procedure is very similar to before:","category":"page"},{"location":"","page":"Home","title":"Home","text":"We load the struct definitions generated by XsdToStruct.jl.\nWe load the xml file with XmlStructLoader.jl\nWe construct an new instance of the struct representing the xml file with the appropriate data copied from the loaded xml file and new data inserted as required.\nWe write the struct instance to a file.","category":"page"},{"location":"","page":"Home","title":"Home","text":"This procedure can be simplified by using Accessors.jl but this is currently not yet completly supported by the structs generated by XsdToStruct.jl.","category":"page"},{"location":"#Loading-the-struct-definitions-2","page":"Home","title":"Loading the struct definitions","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"If we put the *.jl files generated by XsdToStruct.jl in the folder \"Example\" we can load the struct definitions as follows:","category":"page"},{"location":"","page":"Home","title":"Home","text":"include(joinpath(\"Example\", \"Example.jl\"))\nusing .ExampleSchema","category":"page"},{"location":"#Loading-the-xml-file","page":"Home","title":"Loading the xml file","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"We can load the existing xml file with XmlStructLoader:","category":"page"},{"location":"","page":"Home","title":"Home","text":"using XmlStructLoader\n\nxml = load(\"example.xml\", ExampleSchema)","category":"page"},{"location":"#Editing-the-data","page":"Home","title":"Editing the data","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Next we create a new struct instance with the edited data:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Example1 = ExampleComplexType(\n    Element_double=-789.123,\n    Element_boolean=xml.Example1.Element_boolean,\n    Element_integer=xml.Example1.Element_integer\n)\n\ndocument = documentType(\n    Example1=Example1,\n    Example2=xml.Example2,\n    __xml_attributes=xml.__xml_attributes\n)","category":"page"},{"location":"#Writing-the-xml-file-2","page":"Home","title":"Writing the xml file","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Finally we write the new xml struct to a file:","category":"page"},{"location":"","page":"Home","title":"Home","text":"using XmlStructWriter\n\nwrite_xml(document, \"example_2.xml\")","category":"page"},{"location":"docstrings/","page":"Docstrings","title":"Docstrings","text":"Modules = [XmlStructWriter]","category":"page"},{"location":"docstrings/#XmlStructWriter.write_xml-Tuple{Any, AbstractString}","page":"Docstrings","title":"XmlStructWriter.write_xml","text":"write_xml(xml_object, xml_path::AbstractString)::Nothing\n\nWrite the given xml_object to the path specified by xml_path.\n\nThe xml_object must be of a type generated by the XsdToStruct package. It is also necessary that the dict in the __xml_attributes field of this object has the following two keys:\n\nA key __root_name that should contain the name of the root element of the xml file.\nAn entry with the correct xmlns attribute that gives name of the namespace and the corresponding URI of the root element, see the xml specification for details.\n\nPlease consult the given examples if this is unclear; or inspect an XML loaded with XmlStructLoader, it will contain all the needed entries in the __xml_attributes field.\n\nWith this input the written XML is valid according to the schema that was used to generate the struct definitions with XsdToStruct.\n\nExamples\n\nCreating an XML from scratch:\n\njulia> include(joinpath(\"Example\", \"Example.jl\"))\njulia> using .ExampleSchema\n\njulia> using XmlStructWriter\n\njulia> Example1 = ExampleComplexType(\n\tElement_double=100.22,\n\tElement_boolean=true,\n\tElement_integer=-778\n)\n\njulia> xml_attributes = Dict(\n\t\"xmlns:xsi\"=>\"http://www.w3.org/2001/XMLSchema-instance\",\n\t\"xsi:schemaLocation\"=>\"ExampleSchema Example.xsd\",\n\t\"xmlns:ExampleSchema\"=>\"ExampleSchema\",\n\t\"__root_name\"=>\"document\"\n)\n\njulia> document = documentType(\n\tExample1=Example1,\n\tExample2=\"AA99\",\n\t__xml_attributes=xml_attributes\n)\n\njulia> write_xml(document, \"example.xml\")\n\nLoading an XML, editing a field, and then writing to a new file, we are using Accessors.jl here which is recommended:\n\njulia> include(joinpath(\"Example\", \"Example.jl\"))\njulia> using .ExampleSchema\n\njulia> using XmlStructLoader\njulia> using XmlStructWriter\njulia> using Accessors\n\njulia> xml_original = load(\"example.xml\", ExampleSchema)\n\njulia> xml_new = @set xml_original.Example1.Element_double = -789.123\njulia> write_xml(xml_new, \"example_new.xml\")\n\n\n\n\n\n","category":"method"}]
}
